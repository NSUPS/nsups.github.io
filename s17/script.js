async function getSolveCounts(t){const e=await t.json(),n=e.submissions,o=e.participants,a={};for(let t in o)a[t]=o[t][0];const c={};for(let t in n){const e=n[t][1],o=a[n[t][0]],l=n[t][2];c.hasOwnProperty(o)||(c[o]=new Set),1==l&&c[o].add(e)}return c}const table=document.querySelector("table");function getColor(t){return"rgb("+((t=Math.min(100,Math.max(0,t)))<50?255:Math.round(255-5.1*(t-50)))+","+(t>50?255:Math.round(5.1*t))+",0)"}function getColorMatte(t){return"rgba("+((t=Math.min(100,Math.max(0,t)))<50?255:Math.round(255-5.1*(t-50)))+","+(t>50?255:Math.round(5.1*t))+",0, 0.3)"}function fit(t){let e=0;for(i in contests)e+=contests[i][1];const n=document.createElement("thead"),o=document.createElement("tr"),a=document.createElement("th");a.textContent="Rank",o.appendChild(a);const l=document.createElement("th");l.textContent="Name";const r=document.createElement("th");r.textContent=`Solved (${e})`,o.appendChild(l),o.appendChild(r);for(let t in contests){const e=document.createElement("th");e.style.color="blue";const n=document.createElement("a");n.href=`https://vjudge.net/contest/${t}`,n.target="_blank",n.textContent=`${contests[t][0]} (${contests[t][1]})`,e.appendChild(n),o.appendChild(e)}n.appendChild(o),table.appendChild(n);const s=document.createElement("tbody");let d=1;for(let n in t){const o=t[n][0],a=document.createElement("tr"),l=document.createElement("td");l.textContent=""+d++,a.appendChild(l);const r=Math.floor(100*t[n][1].total/e),i=document.createElement("td"),p=document.createElement("span");p.textContent=`${participants_names[o]} `;const h=document.createElement("a");h.style.fontSize="small",h.href=`https://vjudge.net/user/${t[n][0]}`,h.textContent=` ${t[n][0]}`,h.target="_blank",i.appendChild(p),i.appendChild(h),a.appendChild(i);const m=document.createElement("td");m.textContent=`${t[n][1].total} (${r}%)`,m.style.backgroundColor=getColor(r),a.appendChild(m);const u=t[n][1];for(c in contests){let t=0;const e=document.createElement("td");u.hasOwnProperty(c)?(e.textContent=`${u[c]}`,t=u[c]):e.textContent="X",e.style.backgroundColor=getColorMatte(100*t/contests[c][1]),a.appendChild(e)}s.appendChild(a)}table.appendChild(s)}async function run_it(){const t={};for(let e in participants_names)t[e]={};for(let e in contests){const n=await fetch(`https://vjudge.net/contest/rank/single/${e}`),o=await getSolveCounts(n);for(let n in o)participants_names.hasOwnProperty(n)&&(t[n][e]=o[n].size)}for(handle in t){let e=0;for(i in t[handle])e+=t[handle][i];t[handle].total=e}const e=Object.entries(t);e.sort(((t,e)=>e[1].total-t[1].total)),fit(e)}run_it();